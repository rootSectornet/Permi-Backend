
const Login = new Vue({
    el : "#login-page",
    data : {
        Email : "",
        Password : "",
        ValidEmail : "",
        ValidPassword : "",
        IsError : false,
        IsLoading : false,
        IsValid : "is-valid",
        IsInValid : "is-invalid",
        Message : ""
    },
    methods : {
        DoLogin : ()=>{
            Login.IsLoading = true
            Login.IsError = false
            if (Login.Email == "" && Login.Password == "") {
                Login.ValidEmail = Login.IsInValid
                Login.ValidPassword = Login.IsInValid
                Login.IsLoading = false
            }else if (Login.Email == "") {
                Login.ValidEmail = Login.IsInValid
                Login.ValidPassword = Login.IsValid
                Login.IsLoading = false
            } else if(Login.Password == ""){
                Login.ValidEmail = Login.IsValid
                Login.ValidPassword = Login.IsInValid
                Login.IsLoading = false
            }else{
                Login.ValidEmail = Login.IsValid
                Login.ValidPassword = Login.IsValid
                Login.IsLoading = false
                axios.post(BASE_URL + "Auth/DoLogin", {
                    Email: Login.Email,
                    Password: Login.Password,
                  })
                  .then(function (response) {
                    Login.Message = response.data.Message
                    if (response.data.code == 200) {
                        window.location.replace(BASE_URL)
                    } else {
                        Login.IsError = true
                        Login.IsLoading = false
                    }
                  })
                  .catch(function (error) {
                    Login.Message = error
                    Login.IsError = true
                    Login.IsLoading = false
                  });
            }
        }
    }
})